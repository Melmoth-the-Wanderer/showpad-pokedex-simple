<form nz-form>
  <nz-form-item>
    <nz-form-control
      nzErrorTip="Please input your username!"
    >
      <nz-input-group
        class="poke-input-icon-placeholder"
        [nzAddOnBefore]="'Search by name'"
        [nzPrefixIcon]="'search'"
        [nzSuffix]="suffixIconClear"
      >
        <input
          #searchInput
          data-smoke="poke-search-box"
          nz-input
          (input)="pdInput.emit(searchInput.value)"
        />
      </nz-input-group>
    </nz-form-control>
  </nz-form-item>
</form>

<ng-template #suffixIconClear>
  <i
    *ngIf="!pdIsTyping && searchInput.value"
    data-smoke="poke-clear-search"
    (click)="clearInput()"
    class="poke-search-clear-icon"
    nz-icon
    [nzType]="'clear'"
    [nzTheme]="'outline'"
    nz-tooltip
    [nzTooltipTitle]="'Clear input'"
  ></i>
  <i
    *ngIf="pdIsTyping"
    nz-icon
    [nzType]="'loading'"
  ></i>
</ng-template>
